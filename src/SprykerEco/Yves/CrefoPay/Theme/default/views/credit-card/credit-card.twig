{% extends model('template') %}

{% define data = {
    form: form
} %}

{% block body %}
    {% set crefopayFields = [
        {name: 'crefopay.accountholder', attribute: "paymentInstrument.accountHolder"},
        {name: 'crefopay.number', attribute: "paymentInstrument.number"},
        {name: 'crefopay.validity', attribute: "paymentInstrument.validity"},
        {name: 'crefopay.cvv', attribute: "paymentInstrument.cvv"}
    ] %}

    {% include molecule('crefopay-form-loader', 'CrefoPay') with {
        data: {
            form: data.form,
            shopPublicKey: data.form.crefoPayCreditCard.vars.shopPublicKey,
            orderId: data.form.crefoPayCreditCard.vars.orderID,
            registerPaymentActionUrl: data.form.crefoPayCreditCard.vars.registerPaymentActionUrl,
            secureFieldsLibraryUrl: data.form.crefoPayCreditCard.vars.secureFieldsLibraryUrl,
            secureFieldsPlaceholders: data.form.crefoPayCreditCard.vars.secureFieldsPlaceholders,
            fields: crefopayFields
        }
    } only %}
{% endblock %}
