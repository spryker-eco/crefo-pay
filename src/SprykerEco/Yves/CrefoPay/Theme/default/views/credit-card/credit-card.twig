{% extends model('template') %}

{% define data = {
    form: form
} %}

{% block body %}
    {% set crefopayFields = [
        {name: 'crefopay.accountholder', attribute: "paymentInstrument.accountHolder"},
        {name: 'crefopay.number', attribute: "paymentInstrument.number"},
        {name: 'crefopay.validity', attribute: "paymentInstrument.validity"},
        {name: 'crefopay.cvv', attribute: "paymentInstrument.cvv"}
    ] %}

    {% include molecule('crefopay-payment-form', 'CrefoPay') with {
        data: {
            formType: data.form.crefoPayCreditCard,
            shopPublicKey: data.form.crefoPayCreditCard.vars.shopPublicKey,
            orderId: data.form.crefoPayCreditCard.vars.orderID,
            secureFieldsLibraryUrl: data.form.crefoPayCreditCard.vars.secureFieldsLibraryUrl,
            fields: crefopayFields,
            crefoPayConfig: {
                url: data.form.crefoPayCreditCard.vars.secureFieldsApiEndpoint,
                placeholders: {
                    accountHolder: data.form.crefoPayCreditCard.vars.secureFieldsPlaceholders.accountHolder,
                    number: data.form.crefoPayCreditCard.vars.secureFieldsPlaceholders.number,
                    cvv: data.form.crefoPayCreditCard.vars.secureFieldsPlaceholders.cvv
                }
            }
        }
    } only %}
{% endblock %}
